// Get current user
var userID = gs.getUserID();

// Query for pending approvals for this record where user is the approver
var approvalGR = new GlideRecord('sysapproval_approver');
approvalGR.addQuery('sysapproval', current.sys_id);
approvalGR.addQuery('approver', userID);
approvalGR.addQuery('state', 'requested');
approvalGR.query();

// If user has a pending approval, allow edit
answer = approvalGR.hasNext();
