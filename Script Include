(function executeRule(current, previous /*null when async*/) {
    
    // List all your currency fields
    var currencyFields = [
        'disbursement_wire_transfer_external',
        'disbursement_wire_transfer_internal',
        'overdraft_external_accounts',
        'overdraft_internal_accounts',
        'unavailable_funds_external_accounts',
        'unavailable_funds_internal_accounts'
        // Add all other currency fields
    ];
    
    // Format each field
    for (var i = 0; i < currencyFields.length; i++) {
        var fieldName = currencyFields[i];
        var value = current.getValue(fieldName);
        
        if (value) {
            var numValue = parseFloat(value);
            if (!isNaN(numValue)) {
                // Round manually
                var rounded = parseInt(numValue + 0.5);
                // Add commas
                var formatted = rounded.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                current.setDisplayValue(fieldName, '$' + formatted);
            }
        }
    }
    
})(current, previous);
