<!-- HTML Template -->
<div class="authority-limits-widget">
  <div ng-if="!c.jobCode" class="alert alert-info">
    <i class="fa fa-info-circle"></i>
    Please select a job code to view authority limits
  </div>
  
  <div ng-if="c.jobCode && c.loading" class="text-center">
    <i class="fa fa-spinner fa-spin fa-2x"></i>
    <p>Loading authority limits...</p>
  </div>
  
  <div ng-if="c.jobCode && !c.loading && c.authorityLimits.length === 0" class="alert alert-warning">
    <i class="fa fa-exclamation-triangle"></i>
    Job code <strong>{{c.jobCodeDisplay || c.jobCode}}</strong> does not have any existing authority limits
  </div>
  
  <div ng-if="c.jobCode && !c.loading && c.authorityLimits.length > 0" class="authority-limits-container">
    <h4 class="limits-header">
      <i class="fa fa-shield"></i>
      Authority Limits for Job Code: {{c.jobCodeDisplay || c.jobCode}}
    </h4>
    
    <div ng-repeat="limit in c.authorityLimits" class="limit-record">
      <div class="job-info">
        <h5>{{limit.job_code_display}} - {{limit.job_description}}</h5>
      </div>
      
      <div class="limits-grid">
        <!-- Credit Limits Section -->
        <div class="limits-section credit-limits">
          <h6 class="section-title">
            <i class="fa fa-credit-card"></i>
            Credit Limits
          </h6>
          <div class="limits-table">
            <div class="limit-row" ng-if="limit.overdraft_external_accounts">
              <span class="limit-label">Overdraft External Accounts:</span>
              <span class="limit-value">{{limit.overdraft_external_accounts | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.overdraft_internal_accounts">
              <span class="limit-label">Overdraft Internal Accounts:</span>
              <span class="limit-value">{{limit.overdraft_internal_accounts | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.unavailable_funds_external_accounts">
              <span class="limit-label">Unavailable Funds External:</span>
              <span class="limit-value">{{limit.unavailable_funds_external_accounts | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.unavailable_funds_internal_accounts">
              <span class="limit-label">Unavailable Funds Internal:</span>
              <span class="limit-value">{{limit.unavailable_funds_internal_accounts | currency}}</span>
            </div>
          </div>
        </div>
        
        <!-- Non-Credit Limits Section -->
        <div class="limits-section non-credit-limits">
          <h6 class="section-title">
            <i class="fa fa-money"></i>
            Non-Credit Limits
          </h6>
          <div class="limits-table">
            <div class="limit-row" ng-if="limit.disbursement_ach">
              <span class="limit-label">Disbursement ACH:</span>
              <span class="limit-value">{{limit.disbursement_ach | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.disbursement_wire_transfer_external">
              <span class="limit-label">Wire Transfer External:</span>
              <span class="limit-value">{{limit.disbursement_wire_transfer_external | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.disbursement_wire_transfer_internal">
              <span class="limit-label">Wire Transfer Internal:</span>
              <span class="limit-value">{{limit.disbursement_wire_transfer_internal | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.disbursement_official_checks_external">
              <span class="limit-label">Official Checks External:</span>
              <span class="limit-value">{{limit.disbursement_official_checks_external | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.disbursement_official_checks_internal">
              <span class="limit-label">Official Checks Internal:</span>
              <span class="limit-value">{{limit.disbursement_official_checks_internal | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.check_cashing_on_us">
              <span class="limit-label">Check Cashing On Us:</span>
              <span class="limit-value">{{limit.check_cashing_on_us | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.check_cashing_not_on_us">
              <span class="limit-label">Check Cashing Not On Us:</span>
              <span class="limit-value">{{limit.check_cashing_not_on_us | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.remote_deposit">
              <span class="limit-label">Remote Deposit:</span>
              <span class="limit-value">{{limit.remote_deposit | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.treasury_solutions_company_wire_limits">
              <span class="limit-label">Treasury Solutions Wire:</span>
              <span class="limit-value">{{limit.treasury_solutions_company_wire_limits | currency}}</span>
            </div>
            <div class="limit-row" ng-if="limit.fx_wire_limits">
              <span class="limit-label">FX Wire Limits:</span>
              <span class="limit-value">{{limit.fx_wire_limits | currency}}</span>
            </div>
          </div>
        </div>
      </div>
      
      <hr ng-if="!$last" class="record-separator">
    </div>
  </div>
</div>
